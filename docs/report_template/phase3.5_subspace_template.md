# Phase 3.5 â€” Subspace & Neutral Alignment

## ğŸ¯ ç›®çš„

- PCA subspace
- cross-model subspace overlap
- neutral alignment ã«ã‚ˆã‚‹ç©ºé–“è£œæ­£
- Procrustes alignment

## ğŸ“¦ ç”Ÿæˆç‰©

- `cross_model_subspace_overlap.csv`
- `model_alignment.pkl`
- `k_sweep.json`
- `docs/phase3_5_report.md`

## ğŸš€ å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ä¾‹

```bash
python -m src.analysis.cross_model_subspace --model1 gpt2 --model2 pythia-160m
python -m src.analysis.model_alignment --model1 gpt2 --model2 pythia-160m
python -m src.analysis.subspace_k_sweep --model1 gpt2 --model2 pythia-160m --k-values 2 5 10 20
python -m src.analysis.subspace_alignment --model1 gpt2 --model2 pythia-160m
```

## ğŸ“„ ãƒ¬ãƒãƒ¼ãƒˆé …ç›®

### 1. Subspace Overlap ã®çµæœ

#### PCAæ¬¡å…ƒæ•°k=10ã§ã®çµæœ

| ãƒ¢ãƒ‡ãƒ«1 | ãƒ¢ãƒ‡ãƒ«2 | Gratitude | Anger | Apology | å¹³å‡ |
|---------|---------|----------|-------|---------|------|
| gpt2    | pythia-160m | [å€¤] | [å€¤] | [å€¤] | [å€¤] |
| gpt2    | gpt-neo-125M | [å€¤] | [å€¤] | [å€¤] | [å€¤] |
| pythia-160m | gpt-neo-125M | [å€¤] | [å€¤] | [å€¤] | [å€¤] |

#### ãƒ©ãƒ³ãƒ€ãƒ ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã¨ã®æ¯”è¼ƒ
- ãƒ©ãƒ³ãƒ€ãƒ ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³: [å€¤]
- æ„Ÿæƒ…ã‚µãƒ–ã‚¹ãƒšãƒ¼ã‚¹: [å€¤]
- æ”¹å–„ç‡: [%]

### 2. k-sweepçµæœ

#### kå€¤ã«ã‚ˆã‚‹overlapã®å¤‰åŒ–

| kå€¤ | Gratitude | Anger | Apology | å¹³å‡ |
|-----|----------|-------|---------|------|
| 2   | [å€¤]     | [å€¤]  | [å€¤]    | [å€¤] |
| 5   | [å€¤]     | [å€¤]  | [å€¤]    | [å€¤] |
| 10  | [å€¤]     | [å€¤]  | [å€¤]    | [å€¤] |
| 20  | [å€¤]     | [å€¤]  | [å€¤]    | [å€¤] |

#### è€ƒå¯Ÿ
- [kå€¤ãŒoverlapã«ä¸ãˆã‚‹å½±éŸ¿]

### 3. Alignment å¾Œã® cosÂ²

#### Neutralç©ºé–“ã§ã®ç·šå½¢å†™åƒå­¦ç¿’

| ãƒ¢ãƒ‡ãƒ«1 | ãƒ¢ãƒ‡ãƒ«2 | å±¤ | Before | After | æ”¹å–„ç‡ |
|---------|---------|----|--------|-------|--------|
| gpt2    | pythia-160m | 3 | [å€¤] | [å€¤] | [%] |
| gpt2    | pythia-160m | 6 | [å€¤] | [å€¤] | [%] |
| gpt2    | pythia-160m | 9 | [å€¤] | [å€¤] | [%] |
| gpt2    | pythia-160m | 11 | [å€¤] | [å€¤] | [%] |

#### Procrustes Alignment

| ãƒ¢ãƒ‡ãƒ«1 | ãƒ¢ãƒ‡ãƒ«2 | Before | After | æ”¹å–„ç‡ |
|---------|---------|--------|-------|--------|
| gpt2    | pythia-160m | [å€¤] | [å€¤] | [%] |

### 4. L2 æ®‹å·®

#### ç·šå½¢å†™åƒã®ç²¾åº¦

| ãƒ¢ãƒ‡ãƒ«1 | ãƒ¢ãƒ‡ãƒ«2 | å±¤ | L2æ®‹å·® |
|---------|---------|----|--------|
| gpt2    | pythia-160m | 3 | [å€¤] |
| gpt2    | pythia-160m | 6 | [å€¤] |
| gpt2    | pythia-160m | 9 | [å€¤] |
| gpt2    | pythia-160m | 11 | [å€¤] |

### 5. ä»–ãƒ¢ãƒ‡ãƒ«ã¨ã®æ¯”è¼ƒ

#### ãƒ¢ãƒ‡ãƒ«ãƒšã‚¢ã”ã¨ã®æ¯”è¼ƒ
- [ãƒ¢ãƒ‡ãƒ«ãƒšã‚¢ã”ã¨ã®ç‰¹å¾´]

#### å±¤ä¾å­˜æ€§
- [å±¤ã«ã‚ˆã‚‹é•ã„ã®è€ƒå¯Ÿ]

### 6. è€ƒå¯Ÿ

#### ã‚µãƒ–ã‚¹ãƒšãƒ¼ã‚¹æ§‹é€ ã®å…±é€šæ€§
- [ãƒ¢ãƒ‡ãƒ«é–“ã§å…±é€šã™ã‚‹ã‚µãƒ–ã‚¹ãƒšãƒ¼ã‚¹æ§‹é€ ã®å­˜åœ¨]

#### Alignmentã®æœ‰åŠ¹æ€§
- [ç·šå½¢å†™åƒã‚„Procrustes alignmentã®æœ‰åŠ¹æ€§]

#### ä½æ¬¡å…ƒã§ã®ã‚³ã‚¢å› å­
- [k=2-5ã§ã®é«˜ã„overlapã®æ„å‘³]

#### æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã¸ã®ç¤ºå”†
- [Phase 4ä»¥é™ã§ã®æ´»ç”¨æ–¹æ³•]

## ğŸ“ å‚™è€ƒ

[ãã®ä»–ã®æ³¨æ„äº‹é …ã‚„ãƒ¡ãƒ¢]

